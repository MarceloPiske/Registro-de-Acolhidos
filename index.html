<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulário</title>
    <link rel="stylesheet" href="root.css">
    <link rel="stylesheet" href="index.css">
</head>
<style>

</style>

<body>
    <nav>
        <a href="index.html">Registrar novo Acolhido</a>
        <a href="lista_ausentes.html">Controle de Saídas</a>
        <!-- <a href="lista_ausentes.html">Registro de </a> -->
    </nav>
    <div class="container">
        <div class="form">
            <form id="myForm" action="#" method="post">
                <div class="form-content">
                    <!-- <div class="dados-pessoais"> -->
                    <fieldset>
                        <legend>Dados pessoais</legend>
                        <div>
                            <label for="nome_completo">Nome Completo:</label><br>
                            <input type="text" id="nome_completo" name="nome_completo"><br>

                            <label for="data_nascimento">Data de Nascimento:</label><br>
                            <input type="date" id="data_nascimento" name="data_nascimento"><br>
                        </div>
                        <div>
                            <label for="cpf">CPF:</label><br>
                            <input type="number" id="cpf" name="cpf"><br>

                            <label for="telefone">Telefone:</label><br>
                            <input type="tel" id="telefone" name="telefone"><br>
                        </div>
                        <div>
                            <label for="genero">Gênero:</label><br>
                            <input type="radio" id="masculino" name="genero" value="masculino">
                            <label for="masculino">Masculino</label><br>
                            <input type="radio" id="feminino" name="genero" value="feminino">
                            <label for="feminino">Feminino</label>
                        </div>
                    </fieldset>
                    <!-- </div> -->
                    <fieldset>
                        <legend>Endereço</legend>

                        <label for="endereco">Endereço:</label><br>
                        <input type="text" id="endereco" name="endereco"><br>

                        <label for="rua">Rua:</label><br>
                        <input type="text" id="rua" name="rua"><br>

                        <label for="numero">Número:</label><br>
                        <input type="number" id="numero" name="numero"><br>

                        <label for="complemento">Complemento:</label><br>
                        <input type="text" id="complemento" name="complemento"><br>

                        <label for="bairro">Bairro:</label><br>
                        <input type="text" id="bairro" name="bairro"><br>

                        <label for="cidade">Cidade:</label><br>
                        <input type="text" id="cidade" name="cidade"><br>

                    </fieldset>

                    <fieldset>
                        <legend>Situação pessoal</legend>

                        <label for="situacao_familia">Situação da Família:</label><br>
                        <textarea id="situacao_familia" name="situacao_familia"></textarea><br>

                        <label for="saude_especiais">Saúdes e Necessidades Especiais:</label><br>
                        <textarea id="saude_especiais" name="saude_especiais"></textarea><br>

                        <label for="observacao_geral">Observação Geral:</label><br>
                        <textarea id="observacao_geral" name="observacao_geral"></textarea><br>

                    </fieldset>
                </div>
                <input type="submit" value="Enviar">

            </form>
        </div>
        <div class="list">
            <object data="./lista.html" type="text/html"></object>
        </div>
    </div>
    <script>
        function create_acolhido(params) {
            const options = {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'X-Parse-Application-Id': 'mxMjwUljCNcGI8HGoDfehXkkKxCFclDkhB9quDT7',
                    'X-Parse-REST-API-Key': '6tV6elcdHg1Ycn3F0qlw6Q87B5vEZwJqJEIRxsrg'
                },

                body: JSON.stringify(params)
            };

            fetch('https://parseapi.back4app.com/classes/acolhidos', options)
                .then(response => response.json())
                .then(response => {
                    console.log(response)
                    location.reload()
                })
                .catch(err => console.error(err));
        }

        document.getElementById("myForm").addEventListener("submit", function (event) {
            event.preventDefault(); // Previne o envio padrão do formulário

            // Captura dos dados do formulário
            var formData = new FormData(this);

            // Conversão dos dados para objeto JavaScript
            var formObject = {};
            formData.forEach(function (value, key) {
                formObject[key] = value;
            });

            formObject.data_nascimento = { "__type": "Date", "iso": formObject.data_nascimento }
            formObject.telefone = parseInt(formObject.telefone)
            formObject.cpf = parseInt(formObject.cpf)
            formObject.numero = parseInt(formObject.numero)

            create_acolhido(formObject);
            // Exibição dos dados no console (você pode enviar esses dados para o servidor ou manipulá-los conforme necessário)

            //console.log(formObject);
        });
    </script>

</body>

</html>